<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§’è‰²æ¸¬è©¦å·¥å…·</title>
    <style>
        body {
            font-family: -apple-system, "Noto Sans TC", sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #5d4e37; text-align: center; }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .char-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #6b5b4f;
            margin-bottom: 10px;
        }
        .response {
            background: #faf8f5;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #d4a574;
            margin-top: 10px;
            min-height: 60px;
        }
        .status {
            font-size: 0.9em;
            color: #888;
        }
        .success { color: #4a9; }
        .error { color: #c55; }
        button {
            background: linear-gradient(135deg, #d4a574, #c49a6c);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin: 20px auto;
            display: block;
        }
        button:hover { opacity: 0.9; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .highlight { background: #fff3cd; padding: 2px 6px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ğŸŒŸ å¿ƒå…‰ç™‚ç™’å®¤ - è§’è‰²æ¸¬è©¦</h1>
    <p style="text-align:center;color:#666;">æ¸¬è©¦è¨Šæ¯ï¼šã€Œæˆ‘æœ€è¿‘ç¸½è¦ºå¾—å¾ˆç´¯ï¼Œå¥½åƒçœ‹ä¸åˆ°å¸Œæœ›ã€</p>
    
    <button id="runTests" onclick="runAllTests()">ğŸš€ é–‹å§‹æ¸¬è©¦æ‰€æœ‰è§’è‰²</button>
    
    <div id="results"></div>

    <script>
        const API_URL = 'https://healing-ai-editor.winsusa2611.workers.dev';
        const TEST_MESSAGE = 'æˆ‘æœ€è¿‘ç¸½è¦ºå¾—å¾ˆç´¯ï¼Œå¥½åƒçœ‹ä¸åˆ°å¸Œæœ›';
        
        const characters = [
            { id: 'yao', name: 'ğŸŒ¿ æ›œ', book: 'é€å…‰çš„è—¥å¸«', check: 'æ¤ç‰©/å…‰/é™ªä¼´' },
            { id: 'xi', name: 'ğŸµ æ›¦å©†å©†', book: 'é€å…‰çš„è—¥å¸«', check: 'æ‡‰è©²ç¨±å‘¼ã€Œå­©å­ã€' },
            { id: 'qing', name: 'ğŸŒ¸ æ™´', book: 'é€å…‰çš„è—¥å¸«', check: 'å‚¾è½/ä¸èªªæŒ¯ä½œ' },
            { id: 'luyao', name: 'ğŸ”§ è·¯é™', book: 'é•ç« éˆé­‚æ”¹å»ºäº‹å‹™æ‰€', check: 'å»ºç¯‰æ¯”å–»' },
            { id: 'guman', name: 'ğŸª· é¡§æ›¼', book: 'é•ç« éˆé­‚æ”¹å»ºäº‹å‹™æ‰€', check: 'å°ˆæ¥­ä½†æº«æš–' }
        ];
        
        async function runAllTests() {
            const btn = document.getElementById('runTests');
            btn.disabled = true;
            btn.textContent = 'æ¸¬è©¦ä¸­...';
            
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            
            for (const char of characters) {
                const section = document.createElement('div');
                section.className = 'test-section';
                section.innerHTML = `
                    <div class="char-name">${char.name} <span style="font-size:0.8em;color:#999;">(${char.book})</span></div>
                    <div class="status">æª¢æŸ¥é‡é»ï¼š<span class="highlight">${char.check}</span></div>
                    <div class="response" id="response-${char.id}">â³ è«‹æ±‚ä¸­...</div>
                `;
                resultsDiv.appendChild(section);
                
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: TEST_MESSAGE, character: char.id })
                    });
                    
                    const data = await response.json();
                    const responseDiv = document.getElementById(`response-${char.id}`);
                    
                    if (data.reply) {
                        responseDiv.innerHTML = `<span class="success">âœ… æˆåŠŸ</span><br><br>${data.reply}`;
                    } else {
                        responseDiv.innerHTML = `<span class="error">âŒ ç„¡å›æ‡‰</span><br>${JSON.stringify(data)}`;
                    }
                } catch (error) {
                    document.getElementById(`response-${char.id}`).innerHTML = 
                        `<span class="error">âŒ éŒ¯èª¤: ${error.message}</span>`;
                }
                
                // ç¨å¾®å»¶é²é¿å…è«‹æ±‚éå¿«
                await new Promise(r => setTimeout(r, 500));
            }
            
            btn.disabled = false;
            btn.textContent = 'ğŸ”„ é‡æ–°æ¸¬è©¦';
        }
    </script>
</body>
</html>
